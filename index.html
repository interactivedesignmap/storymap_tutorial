<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:fixed; top:0; bottom:0; width:50%; }
    </style>
</head>
<body>

<style>
#features {
    width: 50%;
    margin-left: 50%;
    font-family: sans-serif;
    overflow-y: scroll;
    background-color: #fafafa;
}
section {
    padding:  25px 50px;
    line-height: 25px;
    border-bottom: 1px solid #ddd;
    opacity: 0.25;
    font-size: 13px;
}
section.active {
    opacity: 1;
}
section:last-child {
    border-bottom: none;
    margin-bottom: 400px;
}
</style>

<div id='map'></div>
<div id='features'>
    <section id='losangeles' class='active'>
        <h10>Interaktif Tasarım Haritası</h3>
        <p>Tasarımcı ve kullanıcının işbirliği yapmasına fırsat yaratan, karşılaşılan sorunlara mekansal çözümler üreten ve bu bağlamda veri toplamaya yarayan interaktif bir haritadır. </p>
    </section>
    <section id='boyleheights'>
        <h3>Yaşadığı kamusal mekanın gelişimine katkıda bulunmak isteyen; mekansal ihtiyaçlarının ifade edilmediğini düşünen; kendi varoluşuyla, öteki öznelerle, toplumsal gruplarla işbirliği halinde inisiyatif almak isteyen herkesin ihtiyaçlarına mekanın kendisiyle hemhal olarak çözüm getirmeyi hedefler. </h3>
        <p>Sanal ağların yarattığı yeni ve alternatif kamusal alanlarda, proje arayüzünün kurguladığı çerçeve yardımıyla dayanışmayı, bu sayede açık kamusal alanın katılıma, hayal gücünün geliştirilmesine, bireylerin kendilerini gerçekleyebildikleri çoğulcu mekan inşasına zemin oluşturur. </p>
    </section>
    <section id='centralave'>
        <h3>Down Central Ave</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Central_Avenue_jazz_marker_-_Los_Angeles.jpg/320px-Central_Avenue_jazz_marker_-_Los_Angeles.jpg">
        <p>Or maybe check LA's Jazz history on Central Ave. Image Source - Wikipedia</p>
    </section>
    <section id='chavezravine'>
        <h3>Aşamalar ve iş birlikleri</h3>
        <p>Oluşturulan interaktif harita üzerinde ihtiyaçların işlenmesiyle, yaşadığımız mekanlarla ilgili veri toplanmaya başlanır. Örneğin, çocuk oyun alanlarının yetersizliğinden bahseden veya yaya dostu olmayan bir kavşakla ilgili ortak kaygı taşıyan kullanıcılar, haritanın yarattığı çatı altında organize olur. Amaçlanan doğrultuda başlatılan projenin haritada yeri işaretlenir. Projenin ölçeği, hedeflediği kitle, üretim yöntemleri, vb. hususlar taslak proje formuna işlenir. Belirlenen tarihe kadar yeterli kamuoyu oluşturması durumunda proje bir sonraki aşamaya geçer. Ortak bir mesele etrafında akıl yürüten, paylaşımda bulunan gruplar kurulmuş olur. Bu gönüllü ve yerli örgütlenme, arayüzün kurguladığı yönlendirmelerle tasarım sürecini başlatır. Proje ölçeği doğrultusunda, planlanan bitiş tarihine kadar bu süreç devam eder. Oluşan tartışma ortamının neticesinde, problemler ve çözüm önerileri/istekleri beyan edilir. Yerel yönetimler ve projeye eklemlenen tasarımcılarla süreç zenginleşir. Avan proje aşamasının sonlanmasıyla, yürütücüler arayüzün katalizörlüğünü yaptığı denetleme, fonlama, ve uygulama mekanizmalarıyla işbirliği kurar, kullanıcı odaklı alanlar yaratılmasına fırsat sağlar. 
Haritaya işlenen her veri, kentsel analiz ve tasarım çalışmalarına kaynak olarak kullanılabilir. 
	Haritanın kurguladığı ortaklaşa üretim etkinliği, üretim için gereken en düşük sermayeyle, dolaysızca iş birliği yapan; proje üreticilerini, yerel yönetimleri, gönüllüleri bir platformda birleştirir. İş gücü paylaşımı yapılması, projelerin gerçekleşme şansını arttıracak katalizör işlevi görür. Bu sayede tekil organizasyonlar bünyesinde yürütülen sosyal projeler şeffaflaşır ve katılıma açık hale gelir. Proje üreticilerinin; fon bulma, yerel yönetimlerle iletişime geçme, lojistik ve insan kaynaklarına ulaşma şansları artar. </p>
    </section>
    <section id='watts'>
        <h3>Watts Tower</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Watts-towers.jpg/396px-Watts-towers.jpg">
        <p>Sürdürülebilirlik, kamusal alan dönüşümünün ve harita arayüzünün yaşam eğrisinde iki uçlu olarak incelenebilir. 
İnteraktif Tasarım Haritası’nın katılımcı yapı modeliyle, kamusal alan tasarımında bireylerin etkin ve üretici bir rol üstlenmesini öngörür. Paydaşların kamu yararına değer, etkinlik ve süreç üretmesi, dış kaynak kullanımına bir alternatif oluşturur. 
Proje üreticileri tarafından sisteme girilen bilgiler, beşeri ve coğrafi bilgilerle çözümlenerek projelerin geliştirilmesinde kullanılır. Sürdürülebilirlik, yerel yönetimlerle sağlanacak entegrasyon ve sistemde toplanan verinin yol göstericiliği sayesinde, haritanın kurguladığı yapı modeli ile oluşur. </p><a href="https://en.wikipedia.org/wiki/Watts_Towers">Source - Wikipedia</a>
    </section>
    <section id='unionstation'>
        <h3>All aboard!</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Union_Station_profile%2C_LA%2C_CA%2C_jjron_22.03.2012.jpg/320px-Union_Station_profile%2C_LA%2C_CA%2C_jjron_22.03.2012.jpg">
        <p>We leave off at Union Station, as you can see you can tell how accessible these tools are to tell your story.</p>
        <small id="citation">
            Github repo <a href='https://github.com/maptimeLA/storymap_tutorial'>Story Map Tutorial</a>
        </small>
    </section>
</div>
<script>
//This is a variable that contains an access key to use the services from Mapbox. Please make sure you create an account and replace what's in the quotes with your own key"
//The key shown here is a one-time use key for this tutorial. It will expire on 7/1/2017
mapboxgl.accessToken = 'pk.eyJ1IjoiY3J1emluNzN2dyIsImEiOiJjajJ3djc3ZHAwMHh1MzhxcGY2cmtmMjF5In0.wuIHWedRimzqE_NjYh3x0g';

//This function create the map to load onto your web browser
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [29.022254, 40.993138],
    zoom: 11.48,
    bearing: 24.3,
    pitch: 0,
    hash:true
});

//This are the locations for your map to move along with your story
//This is variable created an object called an JSON, you can add and remove chapters to the story. Make sure you reflect the changes in the sections with the text of your story.    
var chapters = {
    'losangeles': {
        bearing: 0,
        center: [29.022254, 40.993138],
        zoom: 9.48,
        bearing: 24.3,
        pitch: 0,
    },
    'boyleheights': {
        duration: 6000,
        center: [29.022254, 40.993138],
        bearing: -57.3,
        zoom: 13.63,
        pitch: 60
    },
    'centralave': {
        bearing: 0,
        center: [29.022254, 40.993138],
        zoom: 17.93466266150457,
        pitch: 0,
        speed: 0.5
    },
    'kalamış': {
        bearing: 14.148182586771325,
        center: [29.034957, 40.978762],
        zoom: 14.693153872009281,
        pitch: 0,
        speed:0.5
    },
    'watts': {
        bearing: 0,
        center: [-118.24182004928838, 33.938957715132304],
        zoom: 16.199692253005175,
        pitch: 0,
        speed: 0.5
    },
    'unionstation': {
        bearing: -0.00572483752739572,
        center: [-118.23536853348772, 34.05573545250901],
        zoom: 16.296950429322905,
        pitch: 0
    }
};

    
//Function to run the story    
// On every scroll event, check which element is on screen
window.onscroll = function() {
    var chapterNames = Object.keys(chapters);
    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];
        if (isElementOnScreen(chapterName)) {
            setActiveChapter(chapterName);
            break;
        }
    }
};

var activeChapterName = 'losangeles'; //Change this to match the first chapter of your story
function setActiveChapter(chapterName) {
    if (chapterName === activeChapterName) return;

    map.flyTo(chapters[chapterName]);

    document.getElementById(chapterName).setAttribute('class', 'active');
    document.getElementById(activeChapterName).setAttribute('class', '');

    activeChapterName = chapterName;
}

function isElementOnScreen(id) {
    var element = document.getElementById(id);
    var bounds = element.getBoundingClientRect();
    return bounds.top < window.innerHeight && bounds.bottom > 0;
}
//End of function to run the story    
    

//This JS Function asks Mapbox to get the bearing/center/zoom/pitch of the mouse position when clicked.
//To turn off this function, add a "/*" at the beginning of the function and a "*/" at the end. This will turn the function into a comment.
map.on('click', function (e) {
    // e.lngLat is the longitude, latitude geographical position of the event
    var loglatlng = e;
    console.log(e);
    prompt("Copy to clipboard: Ctrl+C, Enter",
        "bearing: "+map.getBearing()+",\n"+
        "center: ["+e.lngLat.lng+", "+e.lngLat.lat+"],\n"+
        "zoom: "+map.getZoom()+",\n"+
        "pitch: "+map.getPitch()
    );
});    

</script>

</body>
</html>
